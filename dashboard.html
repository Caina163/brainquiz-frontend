<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Painel Inicial - BrainQuiz</title>
  <script src="auth.js"></script>
  <script src="dashboard-manager.js"></script>
  <link rel="stylesheet" href="system-styles.css">
  <style>
    body {
      background: linear-gradient(135deg, #000 0%, #1a1a2e 50%, #16213e 100%);
      color: #0af;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    /* Particles Animation */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }
    
    .particle {
      position: absolute;
      width: 2px;
      height: 2px;
      background: #0af;
      border-radius: 50%;
      animation: float 8s infinite linear;
      box-shadow: 0 0 10px #0af;
    }
    
    @keyframes float {
      0% {
        transform: translateY(100vh) translateX(0px);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) translateX(100px);
        opacity: 0;
      }
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto 20px;
      background: rgba(17, 17, 17, 0.8);
      padding: 20px 30px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
      border: 2px solid rgba(0, 170, 255, 0.3);
      box-shadow: 0 0 30px rgba(0, 170, 255, 0.2);
    }
    
    h1 {
      margin: 0;
      text-shadow: 0 0 20px #0af;
      font-size: 2.5rem;
      animation: pulse 3s infinite;
    }

    @keyframes pulse {
      0%, 100% { text-shadow: 0 0 20px #0af; }
      50% { text-shadow: 0 0 40px #0af, 0 0 60px #0af; }
    }
    
    .header-buttons {
      display: flex;
      gap: 15px;
      align-items: center;
    }
    
    #createQuizBtn, #exitBtn {
      background: linear-gradient(45deg, #0af, #08c);
      border: none;
      border-radius: 10px;
      padding: 12px 24px;
      color: #000;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 5px 20px rgba(0, 170, 255, 0.3);
      transition: all 0.3s ease;
      display: inline-block;
    }
    
    #createQuizBtn:hover, #exitBtn:hover {
      background: linear-gradient(45deg, #08c, #0af);
      color: #fff;
      box-shadow: 0 8px 30px rgba(0, 170, 255, 0.6);
      transform: translateY(-3px);
    }
    
    #exitBtn {
      background: linear-gradient(45deg, #ff4444, #cc0000);
      box-shadow: 0 5px 20px rgba(255, 68, 68, 0.3);
    }
    
    #exitBtn:hover {
      background: linear-gradient(45deg, #cc0000, #ff4444);
      box-shadow: 0 8px 30px rgba(255, 68, 68, 0.6);
    }
    
    #tabs {
      max-width: 1200px;
      margin: 0 auto 20px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      background: rgba(17, 17, 17, 0.6);
      padding: 15px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 170, 255, 0.2);
    }
    
    .tab-button {
      background: rgba(34, 34, 34, 0.8);
      border: none;
      border-radius: 10px;
      padding: 12px 20px;
      color: #0af;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0, 170, 255, 0.2);
      font-weight: bold;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }
    
    .tab-button.active, .tab-button:hover {
      background: linear-gradient(45deg, #0af, #08c);
      color: #000;
      box-shadow: 0 8px 25px rgba(0, 170, 255, 0.4);
      transform: translateY(-2px);
    }
    
    #quizzesContainer {
      max-width: 1200px;
      margin: 0 auto;
      min-height: 200px;
    }
    
    .section-container {
      margin-bottom: 40px;
    }
    
    .section-header {
      color: #0af;
      font-size: 1.8rem;
      margin: 0 0 20px 0;
      text-shadow: 0 0 15px #0af;
      border-bottom: 3px solid #0af;
      padding-bottom: 10px;
      text-align: center;
      background: linear-gradient(90deg, transparent, rgba(0,170,255,0.1), transparent);
      padding: 15px;
      border-radius: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 170, 255, 0.3);
    }
    
    .section-actions {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    
    /* Quiz Grid Styles - Conforme Imagem 2 */
    .quiz-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
      padding: 20px 0;
    }
    
    .quiz-card-ativo {
      background: rgba(17, 17, 17, 0.9);
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,170,255,0.2);
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid rgba(0,170,255,0.3);
      backdrop-filter: blur(10px);
      overflow: hidden;
      min-height: 200px;
    }
    
    .quiz-card-ativo:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 35px rgba(0,170,255,0.4);
      border-color: #0af;
    }

    .quiz-thumbnail {
      position: relative;
      height: 140px;
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      display: flex;
      align-items: center;
      justify-content: center;
      border-bottom: 2px solid rgba(0,170,255,0.3);
    }

    .quiz-background {
      position: absolute;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="%23006699" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
      opacity: 0.3;
    }

    .quiz-play-icon {
      position: relative;
      z-index: 2;
      font-size: 3rem;
      color: #0af;
      text-shadow: 0 0 20px #0af;
      transition: all 0.3s ease;
    }

    .quiz-card-ativo:hover .quiz-play-icon {
      transform: scale(1.2);
      text-shadow: 0 0 30px #0af;
    }

    .quiz-info {
      padding: 20px;
    }

    .quiz-title {
      font-weight: bold;
      font-size: 1.3rem;
      margin-bottom: 15px;
      color: #0af;
      text-shadow: 0 0 5px rgba(0,170,255,0.5);
      text-align: center;
    }

    .quiz-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      color: #999;
    }

    .quiz-actions {
      position: absolute;
      top: 15px;
      right: 15px;
      z-index: 10;
    }

    .quiz-action-btn {
      background: rgba(0, 170, 255, 0.8);
      border: none;
      border-radius: 50%;
      width: 35px;
      height: 35px;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 15px rgba(0,170,255,0.4);
    }

    .quiz-action-btn:hover {
      background: #0af;
      transform: rotate(90deg) scale(1.1);
      box-shadow: 0 6px 20px rgba(0,170,255,0.6);
    }

    /* Menu Dropdown */
    .quiz-menu-dropdown {
      position: fixed;
      background: rgba(26, 26, 26, 0.95);
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.8);
      padding: 10px;
      min-width: 150px;
      border: 1px solid rgba(0,170,255,0.3);
      backdrop-filter: blur(10px);
    }

    .menu-item {
      padding: 10px 15px;
      cursor: pointer;
      border-radius: 6px;
      transition: all 0.2s ease;
      color: #0af;
      font-size: 0.9rem;
    }

    .menu-item:hover {
      background: linear-gradient(45deg, #0af, #08c);
      color: #000;
      font-weight: bold;
    }

    .menu-item.danger {
      color: #ff4444;
    }

    .menu-item.danger:hover {
      background: linear-gradient(45deg, #ff4444, #cc0000);
      color: #fff;
    }

    /* Usuarios Grid - Conforme Imagem 3 */
    .usuarios-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
      padding: 20px 0;
    }

    .user-card-gerencial {
      background: rgba(17, 17, 17, 0.9);
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,170,255,0.2);
      padding: 25px;
      position: relative;
      transition: all 0.3s ease;
      border: 1px solid rgba(0,170,255,0.3);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .user-card-gerencial:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(0,170,255,0.4);
      border-color: #0af;
    }

    .user-avatar-section {
      position: relative;
      flex-shrink: 0;
    }

    .user-avatar-circle {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      font-weight: bold;
      color: #000;
      border: 3px solid rgba(0,170,255,0.5);
      position: relative;
    }

    .user-avatar-circle.administrador {
      background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
    }

    .user-avatar-circle.moderador {
      background: linear-gradient(45deg, #ffa726, #ffcc02);
    }

    .user-avatar-circle.aluno {
      background: linear-gradient(45deg, #66bb6a, #81c784);
    }

    .user-status-indicator {
      position: absolute;
      bottom: 5px;
      right: 5px;
      font-size: 1.2rem;
    }

    .user-info-section {
      flex-grow: 1;
    }

    .user-name {
      font-size: 1.3rem;
      font-weight: bold;
      color: #0af;
      margin-bottom: 5px;
    }

    .user-role {
      font-size: 1rem;
      color: #999;
      margin-bottom: 8px;
    }

    .user-email {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 5px;
    }

    .user-login {
      font-size: 0.8rem;
      color: #555;
    }

    .user-actions-section {
      display: flex;
      flex-direction: column;
      gap: 8px;
      flex-shrink: 0;
    }

    .btn-user-action {
      background: linear-gradient(45deg, #0af, #08c);
      border: none;
      border-radius: 6px;
      padding: 8px 12px;
      color: #000;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
      width: 40px;
      height: 35px;
    }

    .btn-user-action:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px rgba(0,170,255,0.4);
    }

    .btn-user-action.danger {
      background: linear-gradient(45deg, #ff4444, #cc0000);
      color: #fff;
    }

    /* Cadastros Grid */
    .cadastros-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
      padding: 20px 0;
    }

    .cadastro-card-pendente {
      background: rgba(17, 17, 17, 0.9);
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,170,255,0.2);
      padding: 25px;
      position: relative;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 193, 7, 0.3);
      backdrop-filter: blur(10px);
    }

    .cadastro-card-pendente:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(255, 193, 7, 0.4);
      border-color: #ffc107;
    }

    .cadastro-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
    }

    .cadastro-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(45deg, #ffc107, #ffca28);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      color: #000;
      font-weight: bold;
    }

    .cadastro-info {
      flex-grow: 1;
    }

    .cadastro-nome {
      font-size: 1.2rem;
      font-weight: bold;
      color: #0af;
      margin-bottom: 5px;
    }

    .cadastro-usuario {
      color: #999;
      font-size: 0.9rem;
    }

    .status-badge {
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: bold;
      text-transform: uppercase;
    }

    .status-badge.pendente {
      background: linear-gradient(45deg, #ffc107, #ffca28);
      color: #000;
    }

    .cadastro-detalhes {
      margin-bottom: 20px;
      color: #999;
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .cadastro-actions {
      display: flex;
      gap: 10px;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      flex: 1;
    }

    .btn-success {
      background: linear-gradient(45deg, #28a745, #20c997);
      color: #fff;
    }

    .btn-success:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
    }

    .btn-danger {
      background: linear-gradient(45deg, #dc3545, #c82333);
      color: #fff;
    }

    .btn-danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
    }

    .btn-primary {
      background: linear-gradient(45deg, #0af, #08c);
      color: #000;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 170, 255, 0.4);
    }

    /* PDFs Grid - Conforme Imagem 5 */
    .pdfs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
      padding: 20px 0;
    }

    .pdf-card-gerencial {
      background: rgba(17, 17, 17, 0.9);
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,170,255,0.2);
      padding: 25px;
      position: relative;
      transition: all 0.3s ease;
      border: 1px solid rgba(0,170,255,0.3);
      backdrop-filter: blur(10px);
    }

    .pdf-card-gerencial:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(0,170,255,0.4);
      border-color: #0af;
    }

    .pdf-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
    }

    .pdf-icon {
      font-size: 3rem;
      color: #ff4444;
    }

    .pdf-info {
      flex-grow: 1;
    }

    .pdf-name {
      font-size: 1.2rem;
      font-weight: bold;
      color: #0af;
      margin-bottom: 10px;
    }

    .pdf-status {
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 0.8rem;
      font-weight: bold;
      display: inline-block;
    }

    .status-available {
      background: rgba(40, 167, 69, 0.2);
      color: #28a745;
      border: 1px solid rgba(40, 167, 69, 0.3);
    }

    .status-blocked {
      background: rgba(255, 193, 7, 0.2);
      color: #ffc107;
      border: 1px solid rgba(255, 193, 7, 0.3);
    }

    .pdf-details {
      margin-bottom: 20px;
      color: #999;
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .pdf-actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .btn-pdf-action {
      background: linear-gradient(45deg, #0af, #08c);
      border: none;
      border-radius: 6px;
      padding: 8px 12px;
      color: #000;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
      flex: 1;
      min-width: 40px;
    }

    .btn-pdf-action:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px rgba(0,170,255,0.4);
    }

    .btn-pdf-action.danger {
      background: linear-gradient(45deg, #ff4444, #cc0000);
      color: #fff;
    }

    /* Items Grid (para arquivados e exclu√≠dos) */
    .items-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
      padding: 20px 0;
    }
    
    .item-card {
      background: rgba(17, 17, 17, 0.9);
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,170,255,0.2);
      padding: 20px;
      position: relative;
      transition: all 0.3s ease;
      border: 1px solid rgba(0,170,255,0.3);
      backdrop-filter: blur(10px);
    }
    
    .item-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(0,170,255,0.4);
      border-color: #0af;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .card-title {
      font-weight: bold;
      font-size: 1.2rem;
      color: #0af;
      text-shadow: 0 0 5px rgba(0,170,255,0.5);
    }

    .card-actions {
      display: flex;
      gap: 8px;
    }

    .btn-icon {
      background: linear-gradient(45deg, #0af, #08c);
      border: none;
      border-radius: 6px;
      padding: 8px 12px;
      color: #000;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
    }

    .btn-icon:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px rgba(0,170,255,0.4);
    }

    .btn-icon.danger {
      background: linear-gradient(45deg, #ff4444, #cc0000);
      color: #fff;
    }

    .card-body {
      color: #999;
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .card-info {
      margin-bottom: 5px;
    }

    /* Empty States */
    .empty-state {
      text-align: center;
      color: #666;
      font-style: italic;
      padding: 60px 40px;
      background: rgba(0,170,255,0.05);
      border-radius: 15px;
      border: 2px dashed rgba(0,170,255,0.3);
      backdrop-filter: blur(5px);
    }

    .empty-icon {
      font-size: 4rem;
      margin-bottom: 20px;
      opacity: 0.6;
    }

    .empty-state h3 {
      color: #0af;
      margin-bottom: 15px;
      font-size: 1.5rem;
    }

    .empty-state p {
      margin-bottom: 25px;
      font-size: 1rem;
    }
    
    .loading {
      text-align: center;
      color: #0af;
      font-style: italic;
      padding: 40px;
      animation: pulse 2s infinite;
    }
    
    .error {
      color: #ff4444;
      background: rgba(255, 68, 68, 0.1);
      padding: 15px;
      border-radius: 10px;
      margin: 10px 0;
      border: 1px solid rgba(255, 68, 68, 0.3);
      backdrop-filter: blur(5px);
    }
    
    #mensagemSucesso {
      position: fixed;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #0af, #08c);
      color: #000;
      padding: 15px 25px;
      border-radius: 10px;
      font-weight: bold;
      box-shadow: 0 8px 25px rgba(0,170,255,0.4);
      z-index: 1000;
      opacity: 0;
      transform: translateX(100%);
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }
    
    #mensagemSucesso.show {
      opacity: 1;
      transform: translateX(0);
    }

    /* Calendar Styles - EXATO COMO A SEGUNDA FOTO */
    .calendar-container {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 40px rgba(0,170,255,0.3);
      border: 2px solid rgba(0,170,255,0.4);
      backdrop-filter: blur(15px);
      overflow-x: auto;
      min-height: 600px;
    }

    .calendar-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .calendar-title {
      color: #fff;
      font-size: 2.5rem;
      font-weight: bold;
      margin-bottom: 30px;
      text-shadow: 0 0 20px rgba(255,255,255,0.5);
      background: linear-gradient(45deg, #0af, #fff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .calendar-legend {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 20px;
      border-radius: 25px;
      font-weight: bold;
      font-size: 1rem;
      backdrop-filter: blur(10px);
      border: 2px solid;
    }

    .legend-current {
      background: rgba(34, 197, 94, 0.2);
      color: #22c55e;
      border-color: #22c55e;
    }

    .legend-future {
      background: rgba(99, 102, 241, 0.2);
      color: #6366f1;
      border-color: #6366f1;
    }

    .legend-past {
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
      border-color: #ef4444;
    }

    .calendar-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      font-size: 1rem;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .calendar-table th {
      background: linear-gradient(135deg, #4f46e5, #7c3aed);
      color: #fff;
      padding: 20px 15px;
      text-align: center;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 1.1rem;
      border: none;
    }

    .calendar-table td {
      padding: 15px;
      text-align: center;
      border: 1px solid rgba(255,255,255,0.1);
      transition: all 0.3s ease;
    }

    .calendar-table tr:hover td {
      background: rgba(0,170,255,0.1);
      transform: scale(1.02);
    }

    /* Per√≠odo Header (Linhas amarelas/douradas) */
    .period-header {
      background: linear-gradient(135deg, #f59e0b, #d97706) !important;
      color: #000 !important;
      font-weight: bold;
      font-size: 1.1rem;
    }

    /* Per√≠odo Atual (Verde brilhante) */
    .current-period {
      background: linear-gradient(135deg, #22c55e, #16a34a) !important;
      color: #fff !important;
      font-weight: bold;
      animation: glow-green 2s infinite alternate;
      position: relative;
    }

    @keyframes glow-green {
      from { box-shadow: 0 0 20px rgba(34, 197, 94, 0.6); }
      to { box-shadow: 0 0 30px rgba(34, 197, 94, 0.9), 0 0 40px rgba(34, 197, 94, 0.5); }
    }

    /* Per√≠odo Futuro (Azul) */
    .future-period {
      background: rgba(99, 102, 241, 0.3);
      color: #a5b4fc;
    }

    /* Per√≠odo Passado (Vermelho/Rosa) */
    .past-period {
      background: rgba(239, 68, 68, 0.3);
      color: #fca5a5;
    }

    /* Linha especial de formatura */
    .completion-info {
      background: linear-gradient(135deg, #059669, #047857) !important;
      color: #fff !important;
      font-weight: bold;
      font-size: 1.2rem;
    }

    /* Responsivo */
    @media (max-width: 768px) {
      .quiz-grid, .usuarios-grid, .cadastros-grid, .pdfs-grid, .items-grid {
        grid-template-columns: 1fr;
        justify-items: center;
      }
      
      .quiz-card-ativo, .user-card-gerencial, .cadastro-card-pendente, .pdf-card-gerencial, .item-card {
        width: 100%;
        max-width: 400px;
      }
      
      #tabs {
        justify-content: center;
      }
      
      .section-header {
        flex-direction: column;
        gap: 15px;
      }

      header {
        flex-direction: column;
        gap: 20px;
        text-align: center;
      }

      .header-buttons {
        justify-content: center;
      }

      .calendar-container {
        padding: 20px;
      }

      .calendar-table {
        font-size: 0.9rem;
      }

      .calendar-table th,
      .calendar-table td {
        padding: 10px 8px;
      }

      .calendar-legend {
        flex-direction: column;
        align-items: center;
        gap: 15px;
      }

      .calendar-title {
        font-size: 2rem;
      }

      .user-card-gerencial {
        flex-direction: column;
        text-align: center;
      }

      .user-actions-section {
        flex-direction: row;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="particles"></div>
  
  <header>
    <h1>üß† BrainQuiz - Painel</h1>
    <div class="header-buttons">
      <button id="createQuizBtn" title="Criar novo quiz">üìù Criar Quiz</button>
      <button id="exitBtn" title="Sair do sistema">üö™ Sair</button>
    </div>
  </header>
  
  <div id="tabs">
    <button class="tab-button active" data-tab="ativos">üéØ Quizzes Ativos</button>
    <button class="tab-button" data-tab="arquivados">üìÅ Arquivados</button>
    <button class="tab-button" data-tab="excluidos">üóëÔ∏è Exclu√≠dos</button>
    <button class="tab-button" data-tab="usuarios">üë• Usu√°rios</button>
    <button class="tab-button" data-tab="cadastros">‚è≥ Cadastros Pendentes</button>
    <button class="tab-button" data-tab="pdfs">üìÑ PDFs</button>
    <button class="tab-button" data-tab="calendario">üìÖ Calend√°rio</button>
    <button class="tab-button" data-tab="perfil">üë§ Meu Perfil</button>
  </div>

  <main id="mainContainer">
    <div id="quizzesContainer"></div>
  </main>

  <div id="mensagemSucesso"></div>

  <input type="file" id="fileInput" accept=".pdf" style="display: none;">
  <input type="file" id="profilePhotoInput" accept="image/*" style="display: none;">

<script>
console.log('üöÄ DASHBOARD CORRIGIDO - v9.0 INTEGRADO COM DASHBOARD-MANAGER.JS');

// ============================================================================
// VARIABLES GLOBAIS - SISTEMA INTEGRADO COM DASHBOARD-MANAGER.JS
// ============================================================================

let usuarioLogado = null;
let currentTab = 'ativos';

const quizzesContainer = document.getElementById('quizzesContainer');
const createQuizBtn = document.getElementById('createQuizBtn');
const exitBtn = document.getElementById('exitBtn');
const mensagemSucesso = document.getElementById('mensagemSucesso');

// ============================================================================
// EFEITOS VISUAIS
// ============================================================================

function criarParticulas() {
  const container = document.querySelector('.particles');
  
  setInterval(() => {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.left = Math.random() * 100 + 'vw';
    particle.style.animationDelay = Math.random() * 2 + 's';
    container.appendChild(particle);
    
    setTimeout(() => {
      if (particle.parentNode) {
        particle.parentNode.removeChild(particle);
      }
    }, 8000);
  }, 500);
}

// ============================================================================
// SISTEMA DE AUTENTICA√á√ÉO INTEGRADO - USA DASHBOARD-MANAGER.JS
// ============================================================================

async function verificarUsuarioLogado() {
  console.log('üîç Verificando sess√£o do usu√°rio...');
  
  try {
    const usuario = await authManager.getUsuarioAtual();
    if (usuario) {
      usuarioLogado = usuario;
      console.log('‚úÖ Usu√°rio autenticado:', usuarioLogado.usuario);
      return true;
    }
    
    console.log('‚ùå Usu√°rio n√£o autenticado, redirecionando...');
    window.location.href = 'https://brainquiiz.netlify.app/index.html';
    return false;
    
  } catch (error) {
    console.error('‚ùå Erro ao verificar sess√£o:', error);
    window.location.href = 'https://brainquiiz.netlify.app/index.html';
    return false;
  }
}

// ============================================================================
// CONFIGURA√á√ÉO DOS BOT√ïES PRINCIPAIS - URLS CORRIGIDAS
// ============================================================================

function configurarBotoesPrincipais() {
  console.log('‚öôÔ∏è Configurando bot√µes principais...');
  
  // BOT√ÉO CRIAR QUIZ - URL CORRIGIDA PARA .APP
  createQuizBtn.onclick = () => {
    console.log('üîÑ Redirecionando para cria√ß√£o de quiz...');
    window.location.href = 'https://brainquiiz.netlify.app/painel.html';
  };

  // BOT√ÉO SAIR - URL CORRIGIDA PARA .APP
  exitBtn.onclick = async () => {
    if (confirm('Deseja realmente sair do sistema?')) {
      console.log('üëã Fazendo logout...');
      try {
        await authManager.logout();
        window.location.href = 'https://brainquiiz.netlify.app/index.html';
      } catch (error) {
        console.error('Erro no logout:', error);
        window.location.href = 'https://brainquiiz.netlify.app/index.html';
      }
    }
  };
}

// ============================================================================
// SISTEMA DE PERMISS√ïES
// ============================================================================

function validarPermissao(acao) {
  if (!usuarioLogado) {
    return false;
  }
  
  const permissoes = {
    'criar_quiz': ['administrador', 'moderador'],
    'editar_quiz': ['administrador', 'moderador'],
    'arquivar_quiz': ['administrador', 'moderador'],
    'excluir_quiz': ['administrador'],
    'gerenciar_usuarios': ['administrador', 'moderador'],
    'editar_usuarios': ['administrador', 'moderador'],
    'alterar_senhas': ['administrador'],
    'promover_rebaixar': ['administrador'],
    'excluir_usuarios': ['administrador'],
    'ver_excluidos': ['administrador'],
    'ver_arquivados': ['administrador'],
    'upload_pdf': ['administrador', 'moderador'],
    'gerenciar_pdfs': ['administrador'],
    'download_pdf_bloqueado': ['administrador'],
  };
  
  return permissoes[acao]?.includes(usuarioLogado.tipo) || false;
}

// ============================================================================
// CONFIGURA√á√ÉO DAS ABAS - PERMISS√ïES CORRIGIDAS
// ============================================================================

function configurarTabs() {
  console.log('‚öôÔ∏è Configurando abas...');
  
  const tabUsuarios = document.querySelector('[data-tab="usuarios"]');
  const tabCadastros = document.querySelector('[data-tab="cadastros"]');
  const tabArquivados = document.querySelector('[data-tab="arquivados"]');
  const tabExcluidos = document.querySelector('[data-tab="excluidos"]');
  const tabCalendario = document.querySelector('[data-tab="calendario"]');
  
  // Calend√°rio sempre vis√≠vel para todos os tipos de usu√°rio
  tabCalendario.style.display = 'inline-block';
  
  if (usuarioLogado.tipo === 'aluno') {
    tabUsuarios.style.display = 'none';
    tabCadastros.style.display = 'none';
    tabArquivados.style.display = 'none';
    tabExcluidos.style.display = 'none';
  } else if (usuarioLogado.tipo === 'moderador') {
    tabUsuarios.style.display = 'inline-block';
    tabCadastros.style.display = 'inline-block';
    tabArquivados.style.display = 'none';
    tabExcluidos.style.display = 'none';
  } else if (usuarioLogado.tipo === 'administrador') {
    tabUsuarios.style.display = 'inline-block';
    tabCadastros.style.display = 'inline-block';
    tabArquivados.style.display = 'inline-block';
    tabExcluidos.style.display = 'inline-block';
  }

  const tabs = document.querySelectorAll('.tab-button');
  tabs.forEach(tab => {
    tab.removeEventListener('click', handleTabClick);
    tab.addEventListener('click', handleTabClick);
  });
  
  console.log('‚úÖ Event listeners das abas configurados');
}

function handleTabClick(event) {
  const tab = event.currentTarget;
  const tabName = tab.getAttribute('data-tab');
  
  console.log('üîÑ Clique na aba:', tabName);
  
  document.querySelectorAll('.tab-button').forEach(t => t.classList.remove('active'));
  tab.classList.add('active');
  
  currentTab = tabName;
  exibirConteudo();
}

// ============================================================================
// DADOS DO CALEND√ÅRIO ACAD√äMICO - EXATO COMO A SEGUNDA FOTO
// ============================================================================

const calendarioAcademico = [
  { periodo: '1¬∫', modulo: 'A', fase: 'Fase 1', dataEstimada: 'Jan - Fev 2025', observacoes: 'In√≠cio do curso' },
  { periodo: '', modulo: 'A', fase: 'Fase 2', dataEstimada: 'Mar - Abr 2025', observacoes: '' },
  { periodo: '', modulo: 'B', fase: 'Fase 1', dataEstimada: 'Mai - Jun 2025', observacoes: '' },
  { periodo: '2¬∫', modulo: 'B', fase: 'Fase 2', dataEstimada: 'Jul - Ago 2025', observacoes: 'Voc√™ entrar√° no 2¬∫ per√≠odo aqui' },
  { periodo: '', modulo: 'C', fase: 'Fase 1', dataEstimada: 'Set - Out 2025', observacoes: '' },
  { periodo: '', modulo: 'C', fase: 'Fase 2', dataEstimada: 'Nov - Dez 2025', observacoes: '' },
  { periodo: '3¬∫', modulo: 'A', fase: 'Fase 1', dataEstimada: 'Jan - Fev 2026', observacoes: 'Voc√™ entrar√° no 3¬∫ per√≠odo aqui' },
  { periodo: '', modulo: 'A', fase: 'Fase 2', dataEstimada: 'Mar - Abr 2026', observacoes: '' },
  { periodo: '', modulo: 'B', fase: 'Fase 1', dataEstimada: 'Mai - Jun 2026', observacoes: '' },
  { periodo: '4¬∫', modulo: 'B', fase: 'Fase 2', dataEstimada: 'Jul - Ago 2026', observacoes: 'Voc√™ entrar√° no 4¬∫ per√≠odo aqui' },
  { periodo: '', modulo: 'C', fase: 'Fase 1', dataEstimada: 'Set - Out 2026', observacoes: '' },
  { periodo: '', modulo: 'C', fase: 'Fase 2', dataEstimada: 'Nov - Dez 2026', observacoes: '' },
  { periodo: '5¬∫', modulo: 'A', fase: 'Fase 1', dataEstimada: 'Jan - Fev 2027', observacoes: 'Voc√™ entrar√° no 5¬∫ per√≠odo aqui' },
  { periodo: '', modulo: 'A', fase: 'Fase 2', dataEstimada: 'Mar - Abr 2027', observacoes: '' },
  { periodo: '', modulo: 'B', fase: 'Fase 1', dataEstimada: 'Mai - Jun 2027', observacoes: '' },
  { periodo: '6¬∫', modulo: 'B', fase: 'Fase 2', dataEstimada: 'Jul - Ago 2027', observacoes: 'Voc√™ entrar√° no 6¬∫ per√≠odo aqui' },
  { periodo: '', modulo: 'C', fase: 'Fase 1', dataEstimada: 'Set - Out 2027', observacoes: '' },
  { periodo: '', modulo: 'C', fase: 'Fase 2', dataEstimada: 'Nov - Dez 2027', observacoes: '' },
  { periodo: '7¬∫', modulo: 'A', fase: 'Fase 1', dataEstimada: 'Jan - Fev 2028', observacoes: 'Voc√™ entrar√° no 7¬∫ per√≠odo aqui' },
  { periodo: '', modulo: 'A', fase: 'Fase 2', dataEstimada: 'Mar - Abr 2028', observacoes: '' },
  { periodo: '', modulo: 'B', fase: 'Fase 1', dataEstimada: 'Mai - Jun 2028', observacoes: '' },
  { periodo: '8¬∫', modulo: 'B', fase: 'Fase 2', dataEstimada: 'Jul - Ago 2028', observacoes: 'Voc√™ entrar√° no 8¬∫ per√≠odo aqui' },
  { periodo: '', modulo: 'C', fase: 'Fase 1', dataEstimada: 'Set - Out 2028', observacoes: '' },
  { periodo: '', modulo: 'C', fase: 'Fase 2', dataEstimada: 'Nov - Dez 2028', observacoes: 'Fim das disciplinas' },
  { periodo: '', modulo: '', fase: '', dataEstimada: '', observacoes: 'Formatura em 2029' }
];

function determinarPeriodoAtual() {
  const agora = new Date();
  const ano = agora.getFullYear();
  const mes = agora.getMonth() + 1;
  
  if (ano === 2025) {
    if (mes >= 1 && mes <= 2) return 0;
    if (mes >= 3 && mes <= 4) return 1;
    if (mes >= 5 && mes <= 6) return 2;
    if (mes >= 7 && mes <= 8) return 3;
    if (mes >= 9 && mes <= 10) return 4;
    if (mes >= 11 && mes <= 12) return 5;
  }
  
  if (ano > 2025) {
    const anosDiferenca = ano - 2025;
    const periodosNoAno = 6;
    const periodoBase = anosDiferenca * periodosNoAno;
    
    if (mes >= 1 && mes <= 2) return periodoBase + 6;
    if (mes >= 3 && mes <= 4) return periodoBase + 7;
    if (mes >= 5 && mes <= 6) return periodoBase + 8;
    if (mes >= 7 && mes <= 8) return periodoBase + 9;
    if (mes >= 9 && mes <= 10) return periodoBase + 10;
    if (mes >= 11 && mes <= 12) return periodoBase + 11;
  }
  
  return 0;
}

// ============================================================================
// EXIBI√á√ÉO DE CALEND√ÅRIO - EXATO COMO A SEGUNDA FOTO
// ============================================================================

function exibirCalendario() {
  const container = document.createElement('div');
  container.className = 'calendar-container';
  
  const header = document.createElement('div');
  header.className = 'calendar-header';
  
  const title = document.createElement('h1');
  title.className = 'calendar-title';
  title.textContent = 'üìÖ Calend√°rio Acad√™mico 2025-2029';
  header.appendChild(title);

  const legend = document.createElement('div');
  legend.className = 'calendar-legend';
  legend.innerHTML = `
    <div class="legend-item legend-current">
      <span>üü¢</span>
      <span>Per√≠odo Atual</span>
    </div>
    <div class="legend-item legend-future">
      <span>üîµ</span>
      <span>Per√≠odo Futuro</span>
    </div>
    <div class="legend-item legend-past">
      <span>üî¥</span>
      <span>Per√≠odo Passado</span>
    </div>
  `;
  header.appendChild(legend);
  container.appendChild(header);

  const table = document.createElement('table');
  table.className = 'calendar-table';
  
  const thead = document.createElement('thead');
  thead.innerHTML = `
    <tr>
      <th>PER√çODO</th>
      <th>M√ìDULO (UTA)</th>
      <th>FASE</th>
      <th>PER√çODO ESTIMADO</th>
      <th>OBSERVA√á√ïES</th>
    </tr>
  `;
  table.appendChild(thead);

  const tbody = document.createElement('tbody');
  const periodoAtualIndex = determinarPeriodoAtual();
  
  calendarioAcademico.forEach((item, index) => {
    const row = document.createElement('tr');
    
    let rowClass = '';
    
    if (index < periodoAtualIndex) {
      rowClass = 'past-period';
    } else if (index === periodoAtualIndex) {
      rowClass = 'current-period';
    } else {
      rowClass = 'future-period';
    }
    
    if (item.periodo && item.periodo !== '') {
      rowClass += ' period-header';
    }
    
    if (index === calendarioAcademico.length - 1) {
      rowClass = 'completion-info';
    }
    
    row.className = rowClass;
    
    row.innerHTML = `
      <td>${item.periodo}</td>
      <td>${item.modulo}</td>
      <td>${item.fase}</td>
      <td>${item.dataEstimada}</td>
      <td>${item.observacoes}</td>
    `;
    
    tbody.appendChild(row);
  });
  
  table.appendChild(tbody);
  container.appendChild(table);

  const info = document.createElement('div');
  info.style.marginTop = '30px';
  info.style.padding = '25px';
  info.style.background = 'rgba(0,170,255,0.1)';
  info.style.borderRadius = '15px';
  info.style.border = '2px solid rgba(0,170,255,0.3)';
  info.style.textAlign = 'center';
  info.innerHTML = `
    <h3 style="color: #0af; margin-bottom: 20px;">‚ÑπÔ∏è Informa√ß√µes do Curso</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; color: #0af;">
      <div>
        <strong>üìÖ Dura√ß√£o Total:</strong><br>
        4 anos (8 per√≠odos)
      </div>
      <div>
        <strong>üéì Formatura Prevista:</strong><br>
        2029
      </div>
      <div>
        <strong>üìö Estrutura:</strong><br>
        3 m√≥dulos por per√≠odo (A, B, C)
      </div>
      <div>
        <strong>‚è±Ô∏è Cada M√≥dulo:</strong><br>
        2 fases (2 meses cada)
      </div>
    </div>
  `;
  container.appendChild(info);

  quizzesContainer.appendChild(container);
}

// ============================================================================
// EXIBI√á√ÉO DE PERFIL
// ============================================================================

function exibirPerfil() {
  console.log('üë§ Exibindo perfil do usu√°rio');
  
  if (!usuarioLogado) {
    quizzesContainer.innerHTML = `
      <div class="error">
        ‚ùå Erro: Usu√°rio n√£o encontrado
      </div>
    `;
    return;
  }
  
  const container = document.createElement('div');
  container.className = 'perfil-form';
  container.style.maxWidth = '600px';
  container.style.margin = '0 auto';
  container.style.background = 'rgba(17, 17, 17, 0.9)';
  container.style.borderRadius = '15px';
  container.style.padding = '30px';
  container.style.boxShadow = '0 8px 25px rgba(0,170,255,0.2)';
  container.style.border = '1px solid rgba(0,170,255,0.3)';
  container.style.backdropFilter = 'blur(10px)';
  
  container.innerHTML = `
    <h2 style="text-align: center; margin-bottom: 30px; color: #0af; text-shadow: 0 0 10px rgba(0,170,255,0.5);">
      üë§ Meu Perfil
    </h2>
    
    <div style="text-align: center; margin-bottom: 25px;">
      <div style="width: 120px; height: 120px; border-radius: 50%; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; background: linear-gradient(45deg, #0af, #08c); color: #000; font-weight: bold; font-size: 3rem; overflow: hidden; border: 4px solid rgba(0,170,255,0.5);">
        ${usuarioLogado.fotoBase64 ? 
          `<img src="${usuarioLogado.fotoBase64}" alt="Foto do perfil" style="width: 100%; height: 100%; object-fit: cover;">` : 
          usuarioLogado.nome.charAt(0).toUpperCase()
        }
      </div>
      <p style="color: #666; font-size: 0.9rem;">Foto do perfil</p>
    </div>

    <div style="display: grid; gap: 20px;">
      <div>
        <label style="display: block; margin-bottom: 8px; color: #0af; font-weight: bold;">Nome:</label>
        <div style="padding: 12px; background: rgba(34, 34, 34, 0.8); border: 2px solid rgba(0,170,255,0.3); border-radius: 8px; color: #0af;">
          ${usuarioLogado.nome}
        </div>
      </div>

      <div>
        <label style="display: block; margin-bottom: 8px; color: #0af; font-weight: bold;">Sobrenome:</label>
        <div style="padding: 12px; background: rgba(34, 34, 34, 0.8); border: 2px solid rgba(0,170,255,0.3); border-radius: 8px; color: #0af;">
          ${usuarioLogado.sobrenome || 'N√£o informado'}
        </div>
      </div>

      <div>
        <label style="display: block; margin-bottom: 8px; color: #0af; font-weight: bold;">Usu√°rio:</label>
        <div style="padding: 12px; background: rgba(34, 34, 34, 0.8); border: 2px solid rgba(0,170,255,0.3); border-radius: 8px; color: #0af;">
          ${usuarioLogado.usuario}
        </div>
      </div>

      <div>
        <label style="display: block; margin-bottom: 8px; color: #0af; font-weight: bold;">Email:</label>
        <div style="padding: 12px; background: rgba(34, 34, 34, 0.8); border: 2px solid rgba(0,170,255,0.3); border-radius: 8px; color: #0af;">
          ${usuarioLogado.email}
        </div>
      </div>

      <div>
        <label style="display: block; margin-bottom: 8px; color: #0af; font-weight: bold;">Telefone:</label>
        <div style="padding: 12px; background: rgba(34, 34, 34, 0.8); border: 2px solid rgba(0,170,255,0.3); border-radius: 8px; color: #0af;">
          ${usuarioLogado.telefone || 'N√£o informado'}
        </div>
      </div>

      <div>
        <label style="display: block; margin-bottom: 8px; color: #0af; font-weight: bold;">Tipo de Usu√°rio:</label>
        <div style="padding: 12px; background: rgba(34, 34, 34, 0.8); border: 2px solid rgba(0,170,255,0.3); border-radius: 8px; color: #0af; text-transform: capitalize;">
          ${usuarioLogado.tipo}
        </div>
      </div>
    </div>

    <div style="text-align: center; margin-top: 30px;">
      <p style="color: #666; font-style: italic;">
        Para editar suas informa√ß√µes, entre em contato com um administrador.
      </p>
    </div>
  `;
  
  quizzesContainer.appendChild(container);
}

// ============================================================================
// EXIBI√á√ÉO DE CONTE√öDO PRINCIPAL - INTEGRADO COM DASHBOARD-MANAGER.JS
// ============================================================================

function exibirConteudo() {
  console.log('üì∫ Exibindo conte√∫do da aba:', currentTab);
  quizzesContainer.innerHTML = '';

  // Usar dashboard-manager.js para mostrar conte√∫do baseado na aba
  const containers = {
    'ativos': 'quizzes-container',
    'arquivados': 'arquivados-container', 
    'usuarios': 'usuarios-container',
    'cadastros': 'cadastros-container',
    'excluidos': 'excluidos-container',
    'pdfs': 'pdfs-container'
  };

  // Criar container espec√≠fico para a aba atual
  if (containers[currentTab]) {
    const container = document.createElement('div');
    container.id = containers[currentTab];
    quizzesContainer.appendChild(container);
  }

  switch (currentTab) {
    case 'calendario':
      exibirCalendario();
      break;
    case 'perfil':
      exibirPerfil();
      break;
    default:
      // Para outras abas, deixar o dashboard-manager.js lidar
      if (dashboardManager && dashboardManager.renderizarDados) {
        dashboardManager.renderizarDados();
      }
      break;
  }
}

// ============================================================================
// FUN√á√ïES AUXILIARES
// ============================================================================

function mostrarMensagemSucesso(mensagem) {
  console.log('üì¢ Mensagem:', mensagem);
  mensagemSucesso.textContent = mensagem;
  mensagemSucesso.classList.add('show');
  
  setTimeout(() => {
    mensagemSucesso.classList.remove('show');
  }, 4000);
}

function mostrarLoading(mensagem = 'Carregando...') {
  quizzesContainer.innerHTML = `<div class="loading">${mensagem}</div>`;
}

function esconderLoading() {
  const loading = document.querySelector('.loading');
  if (loading) loading.remove();
}

// ============================================================================
// INICIALIZA√á√ÉO PRINCIPAL - INTEGRADA COM DASHBOARD-MANAGER.JS
// ============================================================================

async function inicializarSistema() {
  try {
    console.log('üöÄ Iniciando Dashboard Integrado...');
    
    mostrarLoading('Verificando autentica√ß√£o...');
    const usuarioValido = await verificarUsuarioLogado();
    if (!usuarioValido) return;
    
    mostrarLoading('Configurando interface...');
    configurarBotoesPrincipais();
    configurarTabs();
    
    // Inicializar dashboard-manager.js
    if (dashboardManager) {
      mostrarLoading('Carregando dados do sistema...');
      await dashboardManager.inicializar();
    }
    
    exibirConteudo();
    esconderLoading();
    
    console.log('‚úÖ Sistema inicializado com sucesso!');
    console.log('üë§ Usu√°rio:', usuarioLogado.usuario, '(' + usuarioLogado.tipo + ')');
    
    mostrarMensagemSucesso(`‚úÖ Bem-vindo, ${usuarioLogado.nome}! Dashboard carregado com sucesso.`);
    
  } catch (error) {
    console.error('‚ùå Erro na inicializa√ß√£o:', error);
    quizzesContainer.innerHTML = `
      <div class="error">
        <h3>‚ùå Erro na Inicializa√ß√£o</h3>
        <p>Erro: ${error.message}</p>
        <button onclick="location.reload()" style="margin-top: 15px; padding: 10px 20px; background: #0af; border: none; border-radius: 5px; color: #000; font-weight: bold; cursor: pointer;">üîÑ Tentar Novamente</button>
      </div>
    `;
  }
}

// ============================================================================
// EVENT LISTENERS E INICIALIZA√á√ÉO
// ============================================================================

document.addEventListener('DOMContentLoaded', () => {
  console.log('üìÑ DOM carregado, iniciando sistema...');
  
  // Aguardar carregamento dos scripts externos
  const aguardarScripts = () => {
    return new Promise((resolve) => {
      const verificarScripts = () => {
        if (typeof authManager !== 'undefined' && typeof dashboardManager !== 'undefined') {
          resolve();
        } else {
          setTimeout(verificarScripts, 100);
        }
      };
      verificarScripts();
    });
  };
  
  aguardarScripts().then(() => {
    criarParticulas();
    inicializarSistema();
  });
});

document.addEventListener('click', (e) => {
  if (!e.target.closest('.quiz-action-btn') && !e.target.closest('.quiz-menu-dropdown')) {
    document.querySelectorAll('.quiz-menu-dropdown').forEach(menu => {
      menu.remove();
    });
  }
});

console.log('üéØ DASHBOARD HTML TOTALMENTE CORRIGIDO - v9.0!');

</script>
</body>
</html>
